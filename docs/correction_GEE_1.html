<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>CASA0023 Learning Diary - Corrections in GEE - 1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./correction_GEE_2.html" rel="next">
<link href="./GEE_intro.html" rel="prev">
<link href="./img/UCL_square.jpeg" rel="icon" type="image/jpeg">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-5LZK055F2X"></script><script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-5LZK055F2X', { 'anonymize_ip': true});
</script><style>
    .quarto-title-block .quarto-title-banner {
      background-image: url(img/Nighttime-purple.jpeg);
background-size: cover;
    }
    </style>
<script src="site_libs/htmlwidgets-1.6.1/htmlwidgets.js"></script><link href="site_libs/tippyjs-3.2.0/themes/google.css" rel="stylesheet">
<link href="site_libs/tippyjs-3.2.0/themes/light-border.css" rel="stylesheet">
<link href="site_libs/tippyjs-3.2.0/themes/light.css" rel="stylesheet">
<link href="site_libs/tippyjs-3.2.0/themes/translucent.css" rel="stylesheet">
<script src="site_libs/tippyjs-3.2.0/tippy.all.min.js"></script><script src="site_libs/tippy-binding-0.1.0/tippy.js"></script><script src="site_libs/kePrint-0.0.1/kePrint.js"></script><link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
</head>
<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./img/ucl_logo.png" alt="" class="navbar-logo"></a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">CASA0023 Learning Diary</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item compact">
    <a class="nav-link" href="https://github.com/vtesniere/CASA0023_book"><i class="bi bi-github" role="img" aria-label="Source Code">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
<div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav><nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"><div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Corrections in GEE - 1</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav></header><!-- content --><header id="title-block-header" class="quarto-title-block default page-columns page-full"><div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title d-none d-lg-block">Corrections in GEE - 1</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto"><div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Introduction and Helpful Tools</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Introduction and Presentation</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./abbreviations.html" class="sidebar-item-text sidebar-link">Common Remote Sensing Abbreviations!</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Using SNAP and understanding Landsat Data</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">Introducing Remote Sensing - A Bucharest Analysis</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2_sensor_presentation.html" class="sidebar-item-text sidebar-link">Presenting a Sensor: Sentinel 6A and the Poseidon-4 Radar Altimeter</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./corrections.html" class="sidebar-item-text sidebar-link">Atmospheric Corrections</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">GEE and Classification</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./GEE_intro.html" class="sidebar-item-text sidebar-link">Introduction to Google Earth Engine</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./correction_GEE_1.html" class="sidebar-item-text sidebar-link active">Corrections in GEE - 1</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./correction_GEE_2.html" class="sidebar-item-text sidebar-link">Corrections in GEE - 2</a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">Discussing Policy</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summary.html" class="sidebar-item-text sidebar-link">Policy</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><!-- margin-sidebar --><div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#study-area-selection" id="toc-study-area-selection" class="nav-link active" data-scroll-target="#study-area-selection">Study area selection</a></li>
  <li>
<a href="#setting-the-area-in-gee" id="toc-setting-the-area-in-gee" class="nav-link" data-scroll-target="#setting-the-area-in-gee">Setting the area in GEE</a>
  <ul class="collapse">
<li><a href="#understanding-how-cloud-mask-works" id="toc-understanding-how-cloud-mask-works" class="nav-link" data-scroll-target="#understanding-how-cloud-mask-works">Understanding how cloud mask works</a></li>
  </ul>
</li>
  <li>
<a href="#classification" id="toc-classification" class="nav-link" data-scroll-target="#classification">Classification</a>
  <ul class="collapse">
<li>
<a href="#random-forest-rf" id="toc-random-forest-rf" class="nav-link" data-scroll-target="#random-forest-rf">Random Forest (RF)</a>
  <ul class="collapse">
<li><a href="#at-polygon-level" id="toc-at-polygon-level" class="nav-link" data-scroll-target="#at-polygon-level">At polygon level</a></li>
  <li><a href="#at-pixel-level" id="toc-at-pixel-level" class="nav-link" data-scroll-target="#at-pixel-level">At pixel level</a></li>
  </ul>
</li>
  <li>
<a href="#cart-classification-and-regression-tree" id="toc-cart-classification-and-regression-tree" class="nav-link" data-scroll-target="#cart-classification-and-regression-tree">CART (Classification and Regression Tree)</a>
  <ul class="collapse">
<li><a href="#at-polygon-level-1" id="toc-at-polygon-level-1" class="nav-link" data-scroll-target="#at-polygon-level-1">At polygon level</a></li>
  <li><a href="#at-pixel-level-1" id="toc-at-pixel-level-1" class="nav-link" data-scroll-target="#at-pixel-level-1">At pixel level</a></li>
  </ul>
</li>
  </ul>
</li>
  <li>
<a href="#personal-reflection" id="toc-personal-reflection" class="nav-link" data-scroll-target="#personal-reflection">Personal Reflection</a>
  <ul class="collapse">
<li><a href="#correction-analysis-methods" id="toc-correction-analysis-methods" class="nav-link" data-scroll-target="#correction-analysis-methods">Correction Analysis methods</a></li>
  <li><a href="#gee-technicalities" id="toc-gee-technicalities" class="nav-link" data-scroll-target="#gee-technicalities">GEE Technicalities</a></li>
  </ul>
</li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/vtesniere/CASA0023_book/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content"><div style="text-align: justify">


<div class="cell">
<div class="cell-output-display">
<span class="tippy html-widget html-fill-item-overflow-hidden html-fill-item" height="464px" id="htmlwidget-0afdf290dd2db8d1cf7a" width="100%"></span>
<script type="application/json" data-for="htmlwidget-0afdf290dd2db8d1cf7a">{"x":{"element":"CART","opts":{"content":"Classification and Regression Tree - predictive tool which provides prediction of outcome variables based on previously obtained ground-truth data (in our case, manually annotated areas that fit terrain characteristics)"}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="cell-output-display">
<span class="tippy html-widget html-fill-item-overflow-hidden html-fill-item" height="464px" id="htmlwidget-d86fe656175193c57846" width="100%"></span>
<script type="application/json" data-for="htmlwidget-d86fe656175193c57846">{"x":{"element":"nodes","opts":{"content":"a node being the representation of an outcome, selecting 10 or 100 nodes tells the algorithm how many branches it can create. Different number of branches leads to different arguments in the creation of these branches, thus influencing and changing the results."}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
OVERVIEW
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Atmospheric correction in Wollongong using GEE
<ul>
<li>cloud masking in a very cloud urban area Wollongong</li>
</ul>
</li>
<li>Introduction to classification Methods at polygon and pixel level
<ul>
<li>polygons locally defined to areas with specific characteristics to teach the algorithm how to recognise categorised surface types</li>
</ul>
</li>
<li>Use of machine learning methods for surface classification, Random Forest (RF) and <u id="CART">CART</u>
<ul>
<li><p>best results at pixel level for the RF (over 80% Validation accuracy) although over-fitting witnessed (99% training accuracy)</p></li>
<li>
<p>running CART method with for <u id="nodes">10 and 100 nodes</u> to understand difference in parameter tuning</p>
<ul>
<li>better results at CART 10 nodes (79% training and validation accuracy), proving model does not over-fit and provides reliable output</li>
</ul>
</li>
</ul>
</li>
<li>Understanding function elements work in GEE, and how to output requested functionalities</li>
</ul>
</div>
</div>
<section id="study-area-selection" class="level2"><h2 class="anchored" data-anchor-id="study-area-selection">Study area selection</h2>
<p>For this entry, we focus on atmospheric correction in GEE, with specific on the Wollongong area, in New South Wales, Australia. We initially chose this region because the name is particularly interesting but also has the advantage of having interesting characteristics:</p>
<ul>
<li><p>is surrounded by the ocean on the east</p></li>
<li><p>wilderness on the western side</p></li>
<li><p>urban areas in Wollongong itself, providing ground contrast interesting to analyse.</p></li>
</ul></section><section id="setting-the-area-in-gee" class="level1"><h1>Setting the area in GEE</h1>
<p>We start of our analysis by getting a simple view of the studied area. Here, we have Wollongong illustrated through S-2 with images collected between January and October 2022. In this case, we selected images with less than <strong>1%</strong> cloud cover, which allows up to not need to implement a cloud mask but provide a clear image of the area:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="Week_6/wollo_low_cloud_cover.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Wollongong Clipped with Low Cloud Images Input</figcaption><p></p>
</figure>
</div>
<p>Whilst this method allows for clear images, when studying an area these might not always be available. For example, the study area might not have sufficient low cloud-cover images as the research is time specific (i.e.&nbsp;focused on a specific time period). For this reason, the below image is the result we have when include images with up to <strong>20%</strong> cloud cover:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="Week_6/wollo_clouds.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Wollongong with clouds</figcaption><p></p>
</figure>
</div>
<section id="understanding-how-cloud-mask-works" class="level2"><h2 class="anchored" data-anchor-id="understanding-how-cloud-mask-works">Understanding how cloud mask works</h2>
<p>The urban area of Wollongong is particularly covered in clouds, so-much so that none of the urban area is visible. To counter this, we use a cloud mask which uses the <strong>QA60 band</strong>, where the QA stands for ‘Quality Assurance’ and 60 refers to the granularity of the image, with 60m spatial resolution <a href="https://philippgaertner.github.io/2020/08/percent-cloud-cover/" target="_blank">source</a>. It has two possible values, bit 10 and bit 11 which respectively to opaque and cirrus clouds. Using this band has been particularly successful in developing automatic cloud models for S-2 in GEE ( <span class="citation" data-cites="li2022">Li et al. (<a href="references.html#ref-li2022" role="doc-biblioref">2022</a>)</span> ).</p>
<p>In addition to the mask, we take the median value of the pixel and apply it as a value. This allows the removal of the clouds whilst also keeping the image information.</p>
<p><strong>NOTE:</strong> we acknowledge that other methods which are more efficient exist, as some information is lost with the ‘median’ method. We attempted to use a <a href="https://code.earthengine.google.com/?scriptPath=Examples%3ACloud%20Masking%2FSentinel2%20Cloud%20And%20Shadow" target="_blank">GEE community provided example</a> of s2cloudless but was unsuccessful as we recurring memory limit issues.</p>
<p>When applying the respective cloud masking function, we get the following result:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="Week_6/wollo_cloud_msk_polygons.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Successful Cloud Masking Output</figcaption><p></p>
</figure>
</div>
<p>We see a significant improvement in the results, with no more clouds appearing in the image. The polygons included above serve as reference areas for the classifications we with to use.</p>
<p>The colours refer to:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="Week_6/polygon_index.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Polygon Index</figcaption><p></p>
</figure>
</div>
</section></section><section id="classification" class="level1"><h1>Classification</h1>
<section id="random-forest-rf" class="level2"><h2 class="anchored" data-anchor-id="random-forest-rf">Random Forest (RF)</h2>
<section id="at-polygon-level" class="level3"><h3 class="anchored" data-anchor-id="at-polygon-level">At polygon level</h3>
<p>By selecting the reference area polygons, we use this as ground truths in classifier models. These serve as reference areas by which our Random-forest will predict in which category areas outside our reference polygons belong:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="Week_6/Random_forest.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Random Forest Classification of Wollongong ground areas</figcaption><p></p>
</figure>
</div>
<p>Here, 70% of the data is in the training set, and 30% in the test. This means that 70% of the data is seen by the model, and then once the parameters are created, it tests it’s efficiency on the remaining 30%, which remain unseen at that point.</p>
<p><strong>In this case and all following classification analysis, ‘grey’, ‘blue’, ‘white’, ‘black’, ‘green’ are respectively urban low, water, high urban, farmland and forest areas!</strong></p>
</section><section id="at-pixel-level" class="level3"><h3 class="anchored" data-anchor-id="at-pixel-level">At pixel level</h3>
<p>As the previous analysis was conducted at polygon, some accuracy is lost as it is not as representative as taking it at pixel level. We decide to follow with this as it has the advantage of generally being more precise in most cases, especially urban areas. <strong>Although</strong>, this is not always the case, as heterogeneous or mountain tropical environments have had evidence where they perform better with object based modelling ( <span class="citation" data-cites="silveira2019">Silveira et al. (<a href="references.html#ref-silveira2019" role="doc-biblioref">2019</a>)</span> ). We will compared the visual and numeric results from both classification approach methods:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="Week_6/pixel_classification.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Pixel Classification Approach</figcaption><p></p>
</figure>
</div>
<p>We see that the Pixel Classification approach is more precise that the Object based approach. Notable as the pixel based approach is more successful in categorising Farm Land areas (the black dots) which were in-existent in the object based approach.</p>
</section></section><section id="cart-classification-and-regression-tree" class="level2"><h2 class="anchored" data-anchor-id="cart-classification-and-regression-tree">CART (Classification and Regression Tree)</h2>
<p>We then proceed to run the same analysis for CART. We use the same methods as above for polygon and pixel level, putting 70% of the data in training and 30% in test. It has the advantage of automatically selecting the useful spectral data ( <span class="citation" data-cites="lawrence">Lawrence and Wright (<a href="references.html#ref-lawrence" role="doc-biblioref">n.d.</a>)</span> ), making it easy to work with even for non-ML experts.</p>
<p>Like for the RF, we initially use 10 nodes, meaning using trees with a maximum of 10 leaf nodes. These trees look something a little like this:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="Week_6/leaf_example.jpeg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Example of how nodes in CART work</figcaption><p></p>
</figure>
</div>
<p>These create a decision tree, which typically start with a single node, and branches out into the different possible outcomes. By selecting 10 or 100 nodes, the algorithm creates these branches according to different arguments, thus influencing and changing the results.</p>
<section id="at-polygon-level-1" class="level3"><h3 class="anchored" data-anchor-id="at-polygon-level-1">At polygon level</h3>
<p>Our initial Cart output illustrates the model with object based references with 10 nodes.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="Week_6/cart_10_nodes.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">CART polygon 10 nodes</figcaption><p></p>
</figure>
</div>
<p>We proceed to see how the results change when we add more granularity in the number of possible nodes, increasing this to 100.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="Week_6/cart_100_nodes.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">CART polygon 100 nodes</figcaption><p></p>
</figure>
</div>
<p>Differences are visible between the different nodes in the object based analysis. Similar to the RF, there seems to be no black classification (farm land). This is likely due to the non-optimal reference area selecting by us, the user. Our farm-land area most likely encompasses too many topographical differences within the polygon, which does not allow for precise identification of farm-land through object based classification.</p>
<p>Nonetheless, pixel level analysis allows us to make different insights</p>
</section><section id="at-pixel-level-1" class="level3"><h3 class="anchored" data-anchor-id="at-pixel-level-1">At pixel level</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="Week_6/cart_10_nodes_pixel.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">CART pixels 10 nodes</figcaption><p></p>
</figure>
</div>
<p>With 10 nodes at pixel level, we already see the appearance of the black dots, or representations of the farm-land categories. We increase the number of nodes to 100 to see if this betters the results.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="Week_6/cart_100_nodes_pixel.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Cart pixels 100 nodes</figcaption><p></p>
</figure>
</div>
<p>The classifications change depending on the number of nodes but we can not visually determine which method is best.</p>
<p>We can do this numerically by comparing the training and validation accuracy between RF and CART for our study area Wollongong:</p>
<div class="cell">
<div class="cell-output-display">

<table class="table" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">   </th>
   <th style="text-align:right;"> Training Accuracy </th>
   <th style="text-align:right;"> Validation Accuracy </th>
  </tr></thead>
<tbody>
<tr>
<td style="text-align:left;"> Random Forest </td>
   <td style="text-align:right;"> 0.9951065 </td>
   <td style="text-align:right;"> 0.8132372 </td>
  </tr>
<tr>
<td style="text-align:left;"> CART (10 nodes) </td>
   <td style="text-align:right;"> 0.7927461 </td>
   <td style="text-align:right;"> 0.7916121 </td>
  </tr>
<tr>
<td style="text-align:left;"> CART (100 nodes) </td>
   <td style="text-align:right;"> 0.8428325 </td>
   <td style="text-align:right;"> 0.7876802 </td>
  </tr>
</tbody>
</table>
</div>
</div>
<p>We see that RF has the highest validation accuracy although it seems to have considerable over-fitting, with the accuracy decreasing by nearly <strong>20%</strong> between training and validations sets. This is not surprising as RF’s tend to over-fit, and this is further accentuated by our non-optimal reference object choices ( <span class="citation" data-cites="tang2018">Tang, Garreau, and Luxburg (<a href="references.html#ref-tang2018" role="doc-biblioref">2018</a>)</span> ).</p>
</section></section></section><section id="personal-reflection" class="level1"><h1>Personal Reflection</h1>
<section id="correction-analysis-methods" class="level2"><h2 class="anchored" data-anchor-id="correction-analysis-methods">Correction Analysis methods</h2>
<p>This entry was quite insightful in terms of technical understanding in remote sensing image processing and correction. Notably introducing ML techniques that are CART and RF’s. The insights found were interesting, especially with the models correctly identifying various ground characteristics, such as the rivers which coincide with the existing topography.</p>
<p>It was interesting to compare these different techniques, playing around with the different techniques (RF vs CART) but also looking at various parameters such as the number of nodes and reference methods (object based vs pixel).</p>
<p>In future, now that we are more familiar with the methods, we look into getting more precise models. We would do so by paying attention to the <strong>hyper-parameters</strong> tuning strategies in order to optimise the outcomes ( <span class="citation" data-cites="probst2019">Probst, Wright, and Boulesteix (<a href="references.html#ref-probst2019" role="doc-biblioref">2019</a>)</span> ) whilst still keeping it computationally efficient. This includes, but not limited to:</p>
<ul>
<li><p>minimum number of samples a node must contain</p></li>
<li><p>maximum number of nodes per branch</p></li>
<li><p>defining a splitting rule (which optimises Gini Impurity in classification, determining how a feature should split the data when forming the tree)</p></li>
</ul>
<p>Finally, we also acknowledge the black box elements to these statistical methods used for analysis. Black boxes are systems that their internal logic to the user ( <span class="citation" data-cites="guidotti2019">Guidotti et al. (<a href="references.html#ref-guidotti2019" role="doc-biblioref">2019</a>)</span> ) which make certain results, although correct, difficult to precisely explain.</p>
</section><section id="gee-technicalities" class="level2"><h2 class="anchored" data-anchor-id="gee-technicalities">GEE Technicalities</h2>
<p>This entry allowed to further delve into the technical side of GEE.</p>
<p>Initially, we managed to clip the relevant area from the GAUL data set and <a href="https://stackoverflow.com/questions/61220828/how-to-clip-an-image-collection-to-a-feature-collections-geometry" target="_blank">user forums</a>. This is interesting as we used the clip directly when defining the mask instead of clipping the image separately. The JS code format is as follows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> waytwo <span class="op">=</span> ee<span class="op">.</span><span class="fu">ImageCollection</span>(<span class="st">'COPERNICUS/S2_SR_HARMONIZED'</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>                  <span class="op">.</span><span class="fu">filterDate</span>(<span class="st">'2022-01-01'</span><span class="op">,</span> <span class="st">'2022-10-31'</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>                  <span class="op">.</span><span class="fu">filter</span>(ee<span class="op">.</span><span class="at">Filter</span><span class="op">.</span><span class="fu">lt</span>(<span class="st">'CLOUDY_PIXEL_PERCENTAGE'</span><span class="op">,</span><span class="dv">20</span>))</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>                  <span class="op">.</span><span class="fu">map</span>(maskS2clouds)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>                  <span class="co">// clips the images and applies it over the image collection</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>                  <span class="op">.</span><span class="fu">map</span>(<span class="kw">function</span>(image){<span class="cf">return</span> image<span class="op">.</span><span class="fu">clip</span>(wollo)})<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Issues were encountered when trying to understand how to make the CART model for classification work. When running the above code, although we managed to clip the image an create the wished layer, we could not get the input to work when getting the cart model. We got the below error:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="Week_6/clip_error.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Clip Error Example - GEE Console</figcaption><p></p>
</figure>
</div>
<p>To counter this, in the JS code, it is important to make the relevant variables as functions in order to apply certain characteristics, such as clipping which works using base commands such as <code>.median()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">// in this example, 'wollo' is the shapefile for the project, wollongong</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">// data here collected from Sentinel-2</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> waytwo <span class="op">=</span> ee<span class="op">.</span><span class="fu">ImageCollection</span>(<span class="st">'COPERNICUS/S2_SR_HARMONIZED'</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">filterDate</span>(<span class="st">'2022-01-01'</span><span class="op">,</span> <span class="st">'2022-10-31'</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">filterBounds</span>(wollo)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">filter</span>(ee<span class="op">.</span><span class="at">Filter</span><span class="op">.</span><span class="fu">lt</span>(<span class="st">'CLOUDY_PIXEL_PERCENTAGE'</span><span class="op">,</span><span class="dv">20</span>))<span class="op">;</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co">// initially we tried making the object work using </span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co">// where maskS2clouds is a cloud cover function</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> waytwo_masked <span class="op">=</span> waytwo<span class="op">.</span><span class="fu">map</span>(maskS2clouds)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co">// this does not work as the variable is not a function, but when adding the median() argument, this is no longer an issue</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co">// also allows for the removal of clouds as it takes the middle value of each pixel</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> waytwo_masked <span class="op">=</span> waytwo<span class="op">.</span><span class="fu">map</span>(maskS2clouds)<span class="op">.</span><span class="fu">median</span>()<span class="op">;</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> waytwo_clip <span class="op">=</span> waytwo_masked<span class="op">.</span><span class="fu">clip</span>(wollo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Although this took a while to figure out, trial and error has allowed to better understand how the different functions and notations work in Javascript which will be useful for following analysis.</p>


<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography" style="display: none">
<div id="ref-guidotti2019" class="csl-entry" role="doc-biblioentry">
Guidotti, Riccardo, Anna Monreale, Salvatore Ruggieri, Franco Turini, Fosca Giannotti, and Dino Pedreschi. 2019. <span>“A Survey of Methods for Explaining Black Box Models.”</span> <em>ACM Computing Surveys</em> 51 (5): 1–42. <a href="https://doi.org/10.1145/3236009">https://doi.org/10.1145/3236009</a>.
</div>
<div id="ref-lawrence" class="csl-entry" role="doc-biblioentry">
Lawrence, Rick L, and Andrea Wright. n.d. <span>“Rule-Based Classification Systems Using Classification and Regression Tree (CART) Analysis.”</span> <em>PHOTOGRAMMETRIC ENGINEERING</em>.
</div>
<div id="ref-li2022" class="csl-entry" role="doc-biblioentry">
Li, Jianfeng, Luyao Wang, Siqi Liu, Biao Peng, and Huping Ye. 2022. <span>“An Automatic Cloud Detection Model for Sentinel-2 Imagery Based on Google Earth Engine.”</span> <em>Remote Sensing Letters</em> 13 (2): 196–206. <a href="https://doi.org/10.1080/2150704X.2021.1988753">https://doi.org/10.1080/2150704X.2021.1988753</a>.
</div>
<div id="ref-probst2019" class="csl-entry" role="doc-biblioentry">
Probst, Philipp, Marvin N. Wright, and Anne-Laure Boulesteix. 2019. <span>“Hyperparameters and Tuning Strategies for Random Forest.”</span> <em>WIREs Data Mining and Knowledge Discovery</em> 9 (3): e1301. <a href="https://doi.org/10.1002/widm.1301">https://doi.org/10.1002/widm.1301</a>.
</div>
<div id="ref-silveira2019" class="csl-entry" role="doc-biblioentry">
Silveira, Eduarda M. O., Sérgio Henrique G. Silva, Fausto W. Acerbi-Junior, Mônica C. Carvalho, Luis Marcelo T. Carvalho, Jose Roberto S. Scolforo, and Michael A. Wulder. 2019. <span>“Object-Based Random Forest Modelling of Aboveground Forest Biomass Outperforms a Pixel-Based Approach in a Heterogeneous and Mountain Tropical Environment.”</span> <em>International Journal of Applied Earth Observation and Geoinformation</em> 78 (June): 175–88. <a href="https://doi.org/10.1016/j.jag.2019.02.004">https://doi.org/10.1016/j.jag.2019.02.004</a>.
</div>
<div id="ref-tang2018" class="csl-entry" role="doc-biblioentry">
Tang, Cheng, Damien Garreau, and Ulrike von Luxburg. 2018. <span>“When Do Random Forests Fail?”</span> In. Vol. 31. Curran Associates, Inc. <a href="https://proceedings.neurips.cc/paper/2018/hash/204da255aea2cd4a75ace6018fad6b4d-Abstract.html">https://proceedings.neurips.cc/paper/2018/hash/204da255aea2cd4a75ace6018fad6b4d-Abstract.html</a>.
</div>
</div>
</section></section><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./GEE_intro.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Introduction to Google Earth Engine</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./correction_GEE_2.html" class="pagination-link">
        <span class="nav-page-text">Corrections in GEE - 2</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->

</main>
</div>


</body></html>